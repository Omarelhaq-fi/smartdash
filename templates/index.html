<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All-in-One Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Basic Styles */
        body { font-family: 'Inter', sans-serif; background-color: #111827; color: #e5e7eb; }
        .sidebar-icon { color: #9ca3af; transition: all 0.2s; }
        .sidebar-icon:hover, .sidebar-icon.active { color: #ffffff; background-color: #1f2937; }
        .page { animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        /* Tab Styles */
        .tab-link { padding: 0.5rem 1rem; border-bottom: 2px solid transparent; color: #9ca3af; }
        .tab-link.active, .tab-link:hover { color: #38bdf8; border-bottom-color: #38bdf8; }
        /* Modal Styles */
        .modal { position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center; animation: fadeIn 0.3s; }
        .modal-content { background-color: #1f2937; margin: auto; padding: 2rem; border-radius: 0.5rem; width: 90%; max-width: 500px; position: relative; border: 1px solid #374151; }
        /* Toggle Switch */
        .toggle-switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #4b5563; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #38bdf8; }
        input:checked + .slider:before { transform: translateX(22px); }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        /* Timeline */
        .timeline-container { position: relative; height: 1440px; /* 24 * 60 */ background-image: linear-gradient(to bottom, #374151 1px, transparent 1px); background-size: 100% 60px; }
        .timeline-hour { height: 60px; position: relative; }
        .timeline-hour-label { position: absolute; left: -3rem; top: -0.75em; font-size: 0.8rem; color: #9ca3af; }
        .timeline-event { position: absolute; left: 0; right: 0; margin: 0 0.5rem; padding: 0.25rem 0.5rem; border-radius: 0.375rem; border-left: 3px solid; font-size: 0.8rem; }
        /* Flashcard */
        .flashcard { background-color: transparent; width: 100%; height: 150px; perspective: 1000px; }
        .flashcard-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
        .flashcard.is-flipped .flashcard-inner { transform: rotateY(180deg); }
        .flashcard-front, .flashcard-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; padding: 1rem; border-radius: 0.5rem; background-color: #374151; }
        .flashcard-back { transform: rotateY(180deg); }
        /* Pomodoro */
        .pomodoro-dial { width: 250px; height: 250px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: #2d3748; position: relative; }
        .timer-display { width: 220px; height: 220px; border-radius: 50%; background: #111827; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        /* Shot Chart */
        #shot-chart-container { position: relative; width: 100%; max-width: 500px; margin: auto; aspect-ratio: 500 / 470; background-image: url('https://i.imgur.com/gWAE51Y.png'); background-size: contain; background-repeat: no-repeat; background-position: center; cursor: crosshair; }
        .shot-dot { position: absolute; width: 12px; height: 12px; border-radius: 50%; transform: translate(-50%, -50%); border: 1px solid rgba(255,255,255,0.7); }
    </style>
</head>
<body class="flex">

    <!-- Sidebar -->
    <nav class="w-20 bg-gray-900 h-screen p-4 flex flex-col items-center justify-between">
        <div>
            <div class="text-blue-400 text-2xl mb-12"><i class="fas fa-brain"></i></div>
            <ul class="space-y-6">
                <li><a href="#" class="sidebar-icon active p-3 rounded-lg block text-center" data-target="dashboard"><i class="fas fa-tachometer-alt fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="schedule"><i class="fas fa-calendar-check fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="subjects"><i class="fas fa-book-medical fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="courses"><i class="fas fa-chalkboard-teacher fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="pomodoro"><i class="fas fa-clock fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="gym"><i class="fas fa-dumbbell fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="basketball"><i class="fas fa-basketball-ball fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="planner"><i class="fas fa-calendar-alt fa-lg"></i></a></li>
            </ul>
        </div>
        <div><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="settings"><i class="fas fa-cog fa-lg"></i></a></div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 p-6 sm:p-8 overflow-y-auto">
        
        <section id="dashboard" class="page">
            <h1 class="text-3xl font-bold mb-6">Dashboard</h1>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- NEW: Live Clock Card -->
                <div class="bg-gray-800 p-6 rounded-lg flex flex-col items-center justify-center text-center">
                    <h2 class="text-xl font-semibold mb-2 text-blue-400">Time in Cairo</h2>
                    <p id="cairoTimeDisplay" class="text-4xl font-mono font-bold">00:00:00</p>
                    <p id="cairoDateDisplay" class="text-md text-gray-400">Loading date...</p>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Exam Countdown</h2><div id="examCountdownContainer"><p class="text-gray-400">Loading...</p></div></div>
                <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Pomodoro Summary</h2><div class="flex justify-around text-center"><div><p class="text-2xl font-bold" id="pomodoroDaily">0h 0m</p><p class="text-gray-400">Today</p></div><div><p class="text-2xl font-bold" id="pomodoroWeekly">0h 0m</p><p class="text-gray-400">Week</p></div><div><p class="text-2xl font-bold" id="pomodoroMonthly">0h 0m</p><p class="text-gray-400">Month</p></div></div></div>
                <div class="bg-gray-800 p-6 rounded-lg md:col-span-2 h-96"><h2 class="text-xl font-semibold mb-4">Weekly Study Hours</h2><canvas id="weeklyStudyChart"></canvas></div>
                <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Weak Topics</h2><ul id="weakTopicsList" class="list-disc list-inside text-gray-400 space-y-2"><li>Loading...</li></ul><button id="addMistakeBtn" class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Log Mistake</button></div>
            </div>
        </section>

        <section id="schedule" class="page hidden">
            <div class="flex justify-between items-center mb-6"><h1 class="text-3xl font-bold">Today's Schedule</h1><button id="addCustomEventBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Add Event</button></div>
            <div class="bg-gray-800 p-6 rounded-lg"><div class="pl-12"><div id="timeline-container" class="timeline-container"></div></div></div>
        </section>

        <section id="subjects" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Subjects & Lectures</h1>
            <div class="mb-6"><input type="text" id="newSubjectInput" class="bg-gray-700 border border-gray-600 rounded-lg py-2 px-4 w-full md:w-1/3" placeholder="New subject name..."><button id="addSubjectBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg ml-2">Add Subject</button></div>
            <div id="subjectsContainer" class="space-y-8"><p class="text-gray-400">Loading subjects...</p></div>
        </section>

        <section id="courses" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Course Planner</h1>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 bg-gray-800 p-6 rounded-lg"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-semibold">Course Library</h2><button id="addCourseBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Add Course</button></div><div id="courseLibraryContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4"><p class="text-gray-400">Loading courses...</p></div></div>
                <div class="space-y-6">
                    <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Smart Scheduler</h2><div class="bg-gray-700 p-4 rounded-lg text-center"><i class="fas fa-lightbulb text-yellow-400 mb-2"></i><p>You have 45 free mins at 6 PM — do 1 AI course video.</p></div></div>
                    <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Notifications</h2><div id="course-notifications" class="space-y-2 text-sm"><p class="text-gray-400"><i class="fas fa-bell text-blue-400"></i> You haven’t studied Radiology in 4 days.</p><p class="text-gray-400"><i class="fas fa-fire text-orange-500"></i> 5-day study streak! Keep it up!</p></div></div>
                    <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Goals & Milestones</h2><div id="course-goals-container"></div></div>
                </div>
            </div>
            <div class="mt-6 bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Weekly Course Planner</h2><div id="weekly-course-planner" class="grid grid-cols-7 gap-1 text-center text-xs"></div></div>
        </section>

        <section id="pomodoro" class="page hidden flex flex-col items-center justify-center h-full">
             <div class="text-center">
                <div class="pomodoro-dial mb-8" id="pomodoroDial"><div class="timer-display text-center"><div id="timer" class="text-6xl font-bold">25:00</div><div id="timer-status" class="text-lg text-gray-400">Stay Focused</div></div></div>
                <div class="mb-6"><select id="pomodoroSubjectAssign" class="bg-gray-700 border border-gray-600 rounded-lg py-2 px-4"></select></div>
                <div class="flex items-center justify-center space-x-8"><button id="resetTimerBtn" class="text-gray-400 hover:text-white text-2xl"><i class="fas fa-redo"></i></button><button id="startStopBtn" class="bg-blue-600 hover:bg-blue-700 text-white rounded-full w-20 h-20 flex items-center justify-center text-3xl"><i class="fas fa-play"></i></button><button id="skipBtn" class="text-gray-400 hover:text-white text-2xl"><i class="fas fa-forward"></i></button></div>
                <div id="session-tracker" class="mt-6 text-lg">1 / 4 Sessions</div>
            </div>
        </section>
        
        <section id="gym" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Gym Tracker</h1>
            <div class="border-b border-gray-700 mb-6"><nav class="-mb-px flex space-x-8"><a href="#" class="gym-tab tab-link active" data-tab-target="gym-today">Today</a><a href="#" class="gym-tab tab-link" data-tab-target="gym-planner">Planner</a><a href="#" class="gym-tab tab-link" data-tab-target="gym-exercises">Library</a><a href="#" class="gym-tab tab-link" data-tab-target="gym-prs">PRs</a></nav></div>
            <div><div id="gym-today" class="gym-pane tab-pane"></div><div id="gym-planner" class="gym-pane tab-pane hidden"></div><div id="gym-exercises" class="gym-pane tab-pane hidden"></div><div id="gym-prs" class="gym-pane tab-pane hidden"></div></div>
        </section>

        <section id="basketball" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Basketball Analysis</h1>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 bg-gray-800 p-4 rounded-lg">
                    <div class="bg-black rounded-lg mb-4 flex items-center justify-center h-96"><video id="basketball-video" class="w-full h-full rounded-lg" controls style="display: none;"></video><div id="video-placeholder" class="text-center text-gray-400"><i class="fas fa-video fa-3x mb-2"></i><p>Upload video</p></div></div>
                    <div class="flex items-center justify-between"><input type="file" id="video-upload" class="hidden" accept="video/*"><button id="import-video-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Import Video</button><button id="add-tag-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg">Tag Action</button></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg"><h2 class="text-xl font-semibold mb-4">Timeline</h2><div id="analysis-timeline" class="space-y-3 h-96 overflow-y-auto"></div></div>
            </div>
            <div class="mt-6">
                <div class="border-b border-gray-700"><nav class="-mb-px flex space-x-8"><a href="#" class="bball-tab tab-link active" data-tab-target="bball-stats">Stats</a><a href="#" class="bball-tab tab-link" data-tab-target="bball-shot-chart">Shot Chart</a><a href="#" class="bball-tab tab-link" data-tab-target="bball-lineups">Lineups</a><a href="#" class="bball-tab tab-link" data-tab-target="bball-report">Report</a></nav></div>
                <div class="mt-6">
                    <div id="bball-stats" class="bball-pane tab-pane"></div><div id="bball-shot-chart" class="bball-pane tab-pane hidden"></div><div id="bball-lineups" class="bball-pane tab-pane hidden"></div><div id="bball-report" class="bball-pane tab-pane hidden"></div>
                </div>
            </div>
        </section>

        <section id="planner" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Exam Planner</h1>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Add Exam</h2><div class="space-y-4"><input type="text" id="examNameInput" class="bg-gray-700 w-full p-2 rounded" placeholder="Exam Name"><input type="date" id="examDateInput" class="bg-gray-700 w-full p-2 rounded"><button id="addExamBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Add Exam</button></div></div>
                <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Reverse Study Schedule</h2><div id="reverseScheduleContainer" class="text-gray-400"><p>Add an exam to generate a schedule.</p></div></div>
            </div>
        </section>

        <section id="settings" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Settings</h1>
            <div class="bg-gray-800 p-6 rounded-lg max-w-md"><div class="flex items-center justify-between"><span class="text-lg">Dark Mode</span><label class="toggle-switch"><input type="checkbox" id="darkModeToggle" checked><span class="slider"></span></label></div></div>
        </section>

    </main>

    <!-- Modals -->
    <div id="flashcardModal" class="modal"></div>
    <div id="mistakeModal" class="modal"></div>
    <div id="courseModal" class="modal"></div>
    <div id="customEventModal" class="modal"></div>
    <div id="exerciseModal" class="modal"></div>
    <div id="gymScheduleModal" class="modal"></div>
    <div id="taggingModal" class="modal"></div>
    <div id="shotModal" class="modal"></div>
    
    <script src="/static/js/app.js"></script>
</body>
</html>
