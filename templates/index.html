<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All-in-One Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Link to your custom CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="flex bg-gray-900 text-gray-200 font-sans">

    <!-- Sidebar -->
    <nav class="w-20 bg-gray-900 border-r border-gray-700 h-screen p-4 flex flex-col items-center justify-between">
        <div>
            <div class="text-blue-400 text-2xl mb-12"><i class="fas fa-brain"></i></div>
            <ul class="space-y-6">
                <li><a href="#" class="sidebar-icon active p-3 rounded-lg block text-center" data-target="dashboard"><i class="fas fa-tachometer-alt fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="schedule"><i class="fas fa-calendar-check fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="subjects"><i class="fas fa-book-medical fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="courses"><i class="fas fa-chalkboard-teacher fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="pomodoro"><i class="fas fa-clock fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="gym"><i class="fas fa-dumbbell fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="basketball"><i class="fas fa-basketball-ball fa-lg"></i></a></li>
                <li><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="planner"><i class="fas fa-calendar-alt fa-lg"></i></a></li>
            </ul>
        </div>
        <div><a href="#" class="sidebar-icon p-3 rounded-lg block text-center" data-target="settings"><i class="fas fa-cog fa-lg"></i></a></div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 p-6 sm:p-8 overflow-y-auto">
        
        <section id="dashboard" class="page">
            <div class="flex justify-between items-start mb-6">
                <h1 class="text-3xl font-bold">Dashboard</h1>
                <!-- New Cairo Time Box -->
                <div id="cairo-time-box" class="bg-gray-800 p-4 rounded-lg text-center">
                    <div id="cairo-time" class="text-2xl font-bold text-blue-400">Loading...</div>
                    <div id="cairo-date" class="text-sm text-gray-400"></div>
                </div>
            </div>

            <!-- New Notification Area -->
            <div id="dashboard-notifications" class="mb-6"></div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Exam Countdown</h2><div id="examCountdownContainer"><p class="text-gray-400">Loading...</p></div></div>
                <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Pomodoro Summary</h2><div class="flex justify-around text-center"><div><p class="text-2xl font-bold" id="pomodoroDaily">0h 0m</p><p class="text-gray-400">Today</p></div><div><p class="text-2xl font-bold" id="pomodoroWeekly">0h 0m</p><p class="text-gray-400">Week</p></div><div><p class="text-2xl font-bold" id="pomodoroMonthly">0h 0m</p><p class="text-gray-400">Month</p></div></div></div>
                <div class="bg-gray-800 p-6 rounded-lg md:col-span-2 h-96"><h2 class="text-xl font-semibold mb-4">Weekly Study Hours</h2><canvas id="weeklyStudyChart"></canvas></div>
                <div class="bg-gray-800 p-6 rounded-lg"><h2 class="text-xl font-semibold mb-4">Weak Topics</h2><ul id="weakTopicsList" class="list-disc list-inside text-gray-400 space-y-2"><li>Loading...</li></ul><button id="addMistakeBtn" class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Log Mistake</button></div>
            </div>
        </section>

        <section id="schedule" class="page hidden">
            <div class="flex justify-between items-center mb-6"><h1 class="text-3xl font-bold">Today's Schedule</h1><button id="addCustomEventBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Add Event</button></div>
            <div class="bg-gray-800 p-6 rounded-lg"><div class="pl-12"><div id="timeline-container" class="timeline-container"></div></div></div>
        </section>

        <section id="subjects" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Subjects & Lectures</h1>
            <div class="mb-6"><input type="text" id="newSubjectInput" class="bg-gray-700 border border-gray-600 rounded-lg py-2 px-4 w-full md:w-1/3" placeholder="New subject name..."><button id="addSubjectBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg ml-2">Add Subject</button></div>
            <div id="subjectsContainer" class="space-y-8"><p class="text-gray-400">Loading subjects...</p></div>
        </section>

        <section id="courses" class="page hidden">
            <!-- Course content remains the same -->
        </section>

        <section id="pomodoro" class="page hidden flex flex-col items-center justify-center h-full">
            <!-- Pomodoro content remains the same -->
        </section>
        
        <section id="gym" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Gym Tracker</h1>
            <div class="border-b border-gray-700 mb-6"><nav class="-mb-px flex space-x-8"><a href="#" class="tab-link gym-tab active" data-tab-target="gym-today">Today</a><a href="#" class="tab-link gym-tab" data-tab-target="gym-planner">Planner</a><a href="#" class="tab-link gym-tab" data-tab-target="gym-exercises">Library</a><a href="#" class="tab-link gym-tab" data-tab-target="gym-prs">PRs</a></nav></div>
            <div>
                <div id="gym-today" class="tab-pane gym-pane"></div>
                <div id="gym-planner" class="tab-pane gym-pane hidden"></div>
                <div id="gym-exercises" class="tab-pane gym-pane hidden"></div>
                <div id="gym-prs" class="tab-pane gym-pane hidden"></div>
            </div>
        </section>

        <section id="basketball" class="page hidden">
            <h1 class="text-3xl font-bold mb-6">Basketball Analysis</h1>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 bg-gray-800 p-4 rounded-lg">
                    <div class="bg-black rounded-lg mb-4 flex items-center justify-center h-96"><video id="basketball-video" class="w-full h-full rounded-lg" controls style="display: none;"></video><div id="video-placeholder" class="text-center text-gray-400"><i class="fas fa-video fa-3x mb-2"></i><p>Upload video</p></div></div>
                    <div class="flex items-center justify-between"><input type="file" id="video-upload" class="hidden" accept="video/*"><button id="import-video-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Import Video</button><button id="add-tag-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg">Tag Action</button></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg"><h2 class="text-xl font-semibold mb-4">Timeline</h2><div id="analysis-timeline" class="space-y-3 h-96 overflow-y-auto"></div></div>
            </div>
            <div class="mt-6">
                <div class="border-b border-gray-700"><nav class="-mb-px flex space-x-8"><a href="#" class="tab-link bball-tab active" data-tab-target="bball-stats">Stats</a><a href="#" class="tab-link bball-tab" data-tab-target="bball-shot-chart">Shot Chart</a><a href="#" class="tab-link bball-tab" data-tab-target="bball-report">Report</a></nav></div>
                <div class="mt-6">
                    <div id="bball-stats" class="tab-pane bball-pane"></div>
                    <div id="bball-shot-chart" class="tab-pane bball-pane hidden"></div>
                    <div id="bball-report" class="tab-pane bball-pane hidden">
                        <!-- New Report Section -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold">Performance Report</h2>
                                <button id="generateReportBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">
                                    <i class="fas fa-download mr-2"></i>Generate PDF Report
                                </button>
                            </div>
                            <div id="report-content" class="overflow-x-auto">
                                <p class="text-gray-400">Click the button to generate a report.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="planner" class="page hidden">
            <!-- Planner content remains the same -->
        </section>

        <section id="settings" class="page hidden">
           <!-- Settings content remains the same -->
        </section>

    </main>

    <!-- Modals -->
    <div id="flashcardModal" class="modal"></div>
    <div id="mistakeModal" class="modal"></div>
    <div id="courseModal" class="modal"></div>
    <div id="customEventModal" class="modal"></div>
    <div id="exerciseModal" class="modal"></div>
    <div id="gymPlanModal" class="modal"></div> <!-- New Modal for Gym Planner -->
    <div id="taggingModal" class="modal"></div>
    <div id="shotModal" class="modal"></div>
    
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
